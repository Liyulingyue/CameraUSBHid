# Web-based Real-time Pose Detection System

本项目提供了两种基于浏览器的实时姿态检测方案，替代传统的PyQt5桌面应用。

## 🚀 快速开始

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 启动应用 (推荐Flask - 主入口)
```bash
# 方式1: 直接启动Flask应用 (推荐)
python flask_app.py

# 方式2: 使用启动器选择
python launch_web_app.py

# 方式3: 启动Streamlit应用
streamlit run streamlit_app.py
```

## 📋 方案对比

### Streamlit方案 (推荐新手)
- **文件**: `streamlit_app.py`
- **启动**: `streamlit run streamlit_app.py`
- **访问**: http://localhost:8501
- **特点**:
  - 🔰 简单易用，零配置
  - 📱 内置WebRTC支持
  - 🎛️ 自动生成UI组件
  - 🔒 自动处理摄像头权限

### Flask方案 (推荐高级用户)
- **文件**: `flask_app.py` + `templates/index.html`
- **启动**: `python flask_app.py`
- **访问**: http://localhost:5000
- **特点**:
  - 🛠️ 高度可自定义
  - ⚡ 更好的性能控制
  - 🎨 完全自定义UI
  - 📊 实时数据传输
  - 🚀 简单入口，直接运行

## 🔧 功能特性

### 共同功能
- ✅ 实时摄像头画面显示
- ✅ 实时姿态检测和绘制
- ✅ 状态转换和命令生成
- ✅ 可配置的置信度阈值
- ✅ FPS显示和控制
- ✅ 统计信息展示

### Streamlit独有
- 📊 内置数据可视化组件
- 🔄 自动页面刷新
- 📝 Markdown支持

### Flask独有
- 🔌 WebSocket实时通信
- 📡 RESTful API接口
- 📜 命令历史记录
- 🎛️ 更丰富的控制面板

## 🎯 使用指南

### Streamlit版本使用
1. 启动应用后，浏览器会自动打开
2. 点击侧边栏的"启动摄像头"
3. 允许浏览器访问摄像头
4. 调整置信度阈值和其他参数
5. 实时查看姿态检测结果

### Flask版本使用
1. 启动应用后，访问 http://localhost:5000
2. 点击"启动摄像头"按钮
3. 允许浏览器访问摄像头
4. 使用控制面板调整参数
5. 查看实时统计和命令历史

## 🔍 技术对比

| 特性 | PyQt5 | Streamlit | Flask |
|------|-------|-----------|-------|
| 运行环境 | 桌面 | 浏览器 | 浏览器 |
| 部署复杂度 | 高 | 低 | 中 |
| 自定义程度 | 高 | 中 | 高 |
| 实时性能 | 高 | 中 | 高 |
| 跨平台支持 | 一般 | 优秀 | 优秀 |
| 开发速度 | 慢 | 快 | 中 |

## 📱 浏览器兼容性

### 支持的浏览器
- ✅ Chrome 88+
- ✅ Firefox 85+
- ✅ Safari 14+
- ✅ Edge 88+

### 不支持的浏览器
- ❌ Internet Explorer
- ❌ 旧版本移动浏览器

## 🔧 配置选项

### 摄像头设置
- 分辨率: 640x480 (可修改)
- 帧率: 10-60 FPS (可调节)
- 编码质量: JPEG 80% (可优化)

### 姿态检测
- 置信度阈值: 0.1-1.0
- 模型路径: `Source/Models/tinypose_128x96`
- 支持的姿态类型: 17个关键点

### 命令发送
- 超时时间: 1秒
- 命令格式: HEX字符串
- 历史记录: 最近100条

## 🚨 注意事项

1. **摄像头权限**: 首次使用需要允许浏览器访问摄像头
2. **网络安全**: 生产环境建议使用HTTPS
3. **性能优化**: 高分辨率会影响处理速度
4. **防火墙**: 确保端口5000/8501未被阻止

## 🛠️ 故障排除

### 常见问题
1. **摄像头无法启动**: 检查设备权限和其他应用占用
2. **检测效果差**: 调整置信度阈值和光线条件
3. **延迟较高**: 降低分辨率或帧率
4. **命令发送失败**: 检查串口连接和设备状态

### 调试模式
```bash
# Streamlit调试
streamlit run streamlit_app.py --logger.level=debug

# Flask调试
python flask_app.py  # 已启用debug模式
```

## ⚙️ 开机自启动配置 (Linux)

详细的开机自启动配置说明请参考文档：[Docs/rdkx5自启服务配置.md](Docs/rdkx5自启服务配置.md)

## 🔮 未来规划

- [ ] 支持多人姿态检测
- [ ] 添加姿态数据导出功能
- [ ] 集成机器学习训练流程
- [ ] 支持云端部署
- [ ] 移动端适配优化

## 📄 许可证

本项目基于现有CameraUSBHid项目的许可证。